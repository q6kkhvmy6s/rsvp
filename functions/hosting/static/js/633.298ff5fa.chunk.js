"use strict";(self.webpackChunkreservaciones_admin=self.webpackChunkreservaciones_admin||[]).push([[633],{3829:(e,a,s)=>{s.d(a,{GF:()=>n,Sk:()=>r,Yq:()=>t});const t=e=>{if(!e)return"";let a;return a=e&&"object"===typeof e&&"seconds"in e?new Date(1e3*e.seconds):new Date(e),isNaN(a.getTime())?"Invalid Date":a.toLocaleString("default",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},r=e=>{const a=["linear-gradient(135deg, #f6d365 0%, #fda085 100%)","linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)","linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)","linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%)"];let s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);return a[Math.abs(s)%a.length]},n=(e,a,s)=>{if(!e||0===e.length)return void alert("No reservations to export");const r=a.fields.map(e=>e.label);r.push("Promoter","Created At");const n=e.map(e=>{const r=a.fields.map(a=>{const s=e.formData[a.label]||"";return'"'.concat(String(s).replace(/"/g,'""'),'"')}),n=s[e.promoterId]||(e.promoterId?"Unknown":"Direct");r.push('"'.concat(n,'"'));const i=t(e.createdAt);return r.push('"'.concat(i,'"')),r.join(",")}),i=[r.join(","),...n].join("\n"),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),l=URL.createObjectURL(o);c.setAttribute("href",l),c.setAttribute("download","".concat(a.title.replace(/[^a-z0-9]/gi,"_"),"_reservations_").concat((new Date).toISOString().split("T")[0],".csv")),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}},8258:(e,a,s)=>{s.d(a,{A:()=>J});var t=s(2555),r=s(45),n=s(8139),i=s.n(n),o=s(5043),c=s(7852),l=s(579);const d=["className","bsPrefix","as"],m=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o="div"}=e,m=(0,r.A)(e,d);return n=(0,c.oU)(n,"card-body"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},m))});m.displayName="CardBody";const f=m,u=["className","bsPrefix","as"],x=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o="div"}=e,d=(0,r.A)(e,u);return n=(0,c.oU)(n,"card-footer"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},d))});x.displayName="CardFooter";const h=x,b=o.createContext(null);b.displayName="CardHeaderContext";const N=b,g=["bsPrefix","className","as"],j=o.forwardRef((e,a)=>{let{bsPrefix:s,className:n,as:d="div"}=e,m=(0,r.A)(e,g);const f=(0,c.oU)(s,"card-header"),u=(0,o.useMemo)(()=>({cardHeaderBsPrefix:f}),[f]);return(0,l.jsx)(N.Provider,{value:u,children:(0,l.jsx)(d,(0,t.A)((0,t.A)({ref:a},m),{},{className:i()(n,f)}))})});j.displayName="CardHeader";const p=j,A=["bsPrefix","className","variant","as"],v=o.forwardRef((e,a)=>{let{bsPrefix:s,className:n,variant:o,as:d="img"}=e,m=(0,r.A)(e,A);const f=(0,c.oU)(s,"card-img");return(0,l.jsx)(d,(0,t.A)({ref:a,className:i()(o?"".concat(f,"-").concat(o):f,n)},m))});v.displayName="CardImg";const y=v,w=["className","bsPrefix","as"],C=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o="div"}=e,d=(0,r.A)(e,w);return n=(0,c.oU)(n,"card-img-overlay"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},d))});C.displayName="CardImgOverlay";const P=C,S=["className","bsPrefix","as"],U=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o="a"}=e,d=(0,r.A)(e,S);return n=(0,c.oU)(n,"card-link"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},d))});U.displayName="CardLink";const k=U;var R=s(4488);const H=["className","bsPrefix","as"],q=(0,R.A)("h6"),L=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o=q}=e,d=(0,r.A)(e,H);return n=(0,c.oU)(n,"card-subtitle"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},d))});L.displayName="CardSubtitle";const I=L,F=["className","bsPrefix","as"],D=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o="p"}=e,d=(0,r.A)(e,F);return n=(0,c.oU)(n,"card-text"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},d))});D.displayName="CardText";const G=D,T=["className","bsPrefix","as"],Z=(0,R.A)("h5"),_=o.forwardRef((e,a)=>{let{className:s,bsPrefix:n,as:o=Z}=e,d=(0,r.A)(e,T);return n=(0,c.oU)(n,"card-title"),(0,l.jsx)(o,(0,t.A)({ref:a,className:i()(s,n)},d))});_.displayName="CardTitle";const B=_,E=["bsPrefix","className","bg","text","border","body","children","as"],O=o.forwardRef((e,a)=>{let{bsPrefix:s,className:n,bg:o,text:d,border:m,body:u=!1,children:x,as:h="div"}=e,b=(0,r.A)(e,E);const N=(0,c.oU)(s,"card");return(0,l.jsx)(h,(0,t.A)((0,t.A)({ref:a},b),{},{className:i()(n,N,o&&"bg-".concat(o),d&&"text-".concat(d),m&&"border-".concat(m)),children:u?(0,l.jsx)(f,{children:x}):x}))});O.displayName="Card";const J=Object.assign(O,{Img:y,Title:B,Subtitle:I,Body:f,Link:k,Text:G,Header:p,Footer:h,ImgOverlay:P})},8633:(e,a,s)=>{s.r(a),s.d(a,{default:()=>N});var t=s(2555),r=s(5043),n=s(8163),i=s(6509),o=s(4282),c=s(8258),l=s(3519),d=s(6522),m=s(7417),f=s(5016),u=s(196),x=s(6667),h=s(3829),b=s(579);function N(){const{id:e}=(0,n.g)(),{currentUser:a,userProfile:s,signup:N,loginWithGoogle:g,logout:j}=(0,f.A)(),p=(0,n.Zp)(),[A,v]=(0,r.useState)(null),[y,w]=(0,r.useState)(!0),[C,P]=(0,r.useState)(""),[S,U]=(0,r.useState)(""),[k,R]=(0,r.useState)(""),[H,q]=(0,r.useState)(""),[L,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>((async()=>{try{const a=await(0,x.x7)((0,x.H9)(u.db,"events",e));if(a.exists()){const e=(0,t.A)({id:a.id},a.data());v(e),document.title=e.title}else P("Event not found")}catch(a){P("Failed to load event"),console.error(a)}finally{w(!1)}})(),()=>{document.title="Reservaciones"}),[e]);return y?(0,b.jsx)(l.A,{className:"text-center mt-5",children:(0,b.jsx)(m.A,{animation:"border"})}):C?(0,b.jsx)(l.A,{className:"mt-5",children:(0,b.jsx)(i.A,{variant:"danger",children:C})}):(0,b.jsx)(l.A,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:(0,b.jsx)("div",{className:"w-100",style:{maxWidth:"500px"},children:(0,b.jsx)(c.A,{className:"glass-card border-0",children:(0,b.jsxs)(c.A.Body,{className:"p-4",children:[(0,b.jsx)("h2",{className:"text-center mb-4 fw-bold",children:"Join Event Team"}),(0,b.jsxs)("div",{className:"text-center mb-4",children:[(0,b.jsx)("h5",{children:A.title}),(0,b.jsx)("p",{className:"text-muted",children:(0,h.Yq)(A.time)})]}),a?(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("p",{children:["You are logged in as ",(0,b.jsx)("strong",{children:(null===s||void 0===s?void 0:s.username)||a.email}),"."]}),(0,b.jsx)(o.A,{onClick:async()=>{if(a){I(!0);try{await(0,x.mZ)((0,x.H9)(u.db,"events",e),{promoters:(0,x.hq)(a.uid)}),await(0,x.mZ)((0,x.H9)(u.db,"users",a.uid),{events:(0,x.hq)(e),role:"promoter"}),p("/")}catch(s){console.error(s),P("Failed to join event: "+s.message)}finally{I(!1)}}},disabled:L,className:"w-100",children:L?(0,b.jsx)(m.A,{size:"sm",animation:"border"}):"Join as Promoter"}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsxs)("small",{children:["Not you? ",(0,b.jsx)("span",{className:"text-primary",style:{cursor:"pointer"},onClick:async()=>{try{await j(),p("/login")}catch(C){console.error("Failed to log out",C)}},children:"Log out"})]})})]}):(0,b.jsxs)(d.A,{onSubmit:async a=>{a.preventDefault(),I(!0);try{const a=(await N(S,k,H,"promoter")).user.uid;await(0,x.mZ)((0,x.H9)(u.db,"events",e),{promoters:(0,x.hq)(a)}),await(0,x.mZ)((0,x.H9)(u.db,"users",a),{events:(0,x.hq)(e)}),p("/")}catch(s){console.error(s),P("Failed to create account and join: "+s.message)}finally{I(!1)}},children:[(0,b.jsx)(i.A,{variant:"info",children:"Create an account to become a promoter for this event."}),(0,b.jsxs)(d.A.Group,{id:"username",className:"mb-3",children:[(0,b.jsx)(d.A.Label,{children:"Username"}),(0,b.jsx)(d.A.Control,{type:"text",required:!0,onChange:e=>q(e.target.value)})]}),(0,b.jsxs)(d.A.Group,{id:"email",className:"mb-3",children:[(0,b.jsx)(d.A.Label,{children:"Email"}),(0,b.jsx)(d.A.Control,{type:"email",required:!0,onChange:e=>U(e.target.value)})]}),(0,b.jsxs)(d.A.Group,{id:"password",className:"mb-3",children:[(0,b.jsx)(d.A.Label,{children:"Password"}),(0,b.jsx)(d.A.Control,{type:"password",required:!0,onChange:e=>R(e.target.value)})]}),(0,b.jsx)(o.A,{disabled:L,className:"w-100",type:"submit",children:"Create Account & Join"}),(0,b.jsx)("div",{className:"w-100 text-center mt-3",children:(0,b.jsxs)(o.A,{variant:"outline-danger",className:"w-100",onClick:async()=>{I(!0);try{const a=(await g("promoter")).user.uid;await(0,x.mZ)((0,x.H9)(u.db,"events",e),{promoters:(0,x.hq)(a)}),await(0,x.mZ)((0,x.H9)(u.db,"users",a),{events:(0,x.hq)(e)}),p("/")}catch(a){console.error(a),P("Failed to join with Google: "+a.message)}finally{I(!1)}},disabled:L,children:[(0,b.jsx)("i",{className:"bi bi-google me-2"})," Join with Google"]})}),(0,b.jsx)("div",{className:"w-100 text-center mt-3",children:(0,b.jsx)(n.N_,{to:"/login",children:"Already have an account? Log In"})})]})]})})})})}}}]);
//# sourceMappingURL=633.298ff5fa.chunk.js.map