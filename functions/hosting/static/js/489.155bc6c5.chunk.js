"use strict";(self.webpackChunkreservaciones_admin=self.webpackChunkreservaciones_admin||[]).push([[489],{1072:(e,s,a)=>{a.d(s,{A:()=>x});var l=a(2555),i=a(45),t=a(8139),n=a.n(t),r=a(5043),c=a(7852),d=a(579);const o=["bsPrefix","className","as"],m=r.forwardRef((e,s)=>{let{bsPrefix:a,className:t,as:r="div"}=e,m=(0,i.A)(e,o);const x=(0,c.oU)(a,"row"),h=(0,c.gy)(),b=(0,c.Jm)(),p="".concat(x,"-cols"),j=[];return h.forEach(e=>{const s=m[e];let a;delete m[e],null!=s&&"object"===typeof s?({cols:a}=s):a=s;const l=e!==b?"-".concat(e):"";null!=a&&j.push("".concat(p).concat(l,"-").concat(a))}),(0,d.jsx)(r,(0,l.A)((0,l.A)({ref:s},m),{},{className:n()(t,x,...j)}))});m.displayName="Row";const x=m},1489:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var l=a(2555),i=a(5043),t=a(4282),n=a(8602),r=a(3519),c=a(6522),d=a(1666),o=a(1072),m=a(7417),x=a(196),h=a(6667),b=a(6068),p=a(8163),j=a(579);const u=function(){const[e,s]=(0,i.useState)(""),[a,u]=(0,i.useState)(""),[A,N]=(0,i.useState)(""),[v,f]=(0,i.useState)(""),[g,y]=(0,i.useState)(""),[C,k]=(0,i.useState)(""),[w,F]=(0,i.useState)(null),[G,D]=(0,i.useState)(!1),S=(0,p.Zp)(),[E,I]=(0,i.useState)(null),[L,P]=(0,i.useState)([{id:1,label:"Nombre",type:"text",required:!0},{id:2,label:"N\xfamero de personas",type:"number",required:!0},{id:3,label:"Gasto aproximado",type:"number",required:!1}]),z=e=>{const s={id:Date.now(),label:"",type:e,required:!1,options:"select"===e?[""]:void 0};P([...L,s])},R=(e,s)=>{const{name:a,value:i}=s.target,t=L.map(s=>s.id===e?(0,l.A)((0,l.A)({},s),{},{[a]:i}):s);P(t)};return(0,j.jsxs)(r.A,{className:"page-container fade-in",children:[(0,j.jsxs)("div",{className:"mb-5",children:[(0,j.jsx)("h1",{className:"display-5 fw-bold text-gradient mb-2",children:"Create New Event"}),(0,j.jsx)("p",{className:"text-muted fs-6",children:"Set up your event and customize the reservation form"})]}),(0,j.jsxs)(c.A,{onSubmit:async s=>{s.preventDefault(),D(!0);try{let s="";if(w)try{const e=(0,b.KR)(x.IG,"events/".concat(Date.now(),"_").concat(w.name)),a=await(0,b.D)(e,w);s=await(0,b.qk)(a.ref)}catch(l){console.error("Image upload failed:",l),alert("Failed to upload image (check Firebase Storage rules). Event will be created without it.")}const i=e=>{if(Array.isArray(e))return e.map(e=>i(e));if(null!==e&&"object"===typeof e){const s={};return Object.keys(e).forEach(a=>{void 0!==e[a]&&(s[a]=i(e[a]))}),s}return e},t=i({title:e,description:a,time:A,place:v,address:g,note:C,imageUrl:s||"placeholder",fields:L,primaryField:E,status:"active",acceptingReservations:!0,promoters:[],createdAt:Date.now()}),n=await(0,h.gS)((0,h.rJ)(x.db,"events"),t);D(!1),S("/event/".concat(n.id))}catch(i){console.error("Error creating event: ",i),D(!1),alert("Failed to create event. Please try again.")}},children:[(0,j.jsxs)("div",{className:"card-section",children:[(0,j.jsxs)("div",{className:"section-header",children:[(0,j.jsx)("div",{className:"icon",children:(0,j.jsx)("i",{className:"bi bi-calendar-event"})}),(0,j.jsx)("h3",{children:"Event Details"})]}),(0,j.jsx)(o.A,{children:(0,j.jsx)(n.A,{md:12,children:(0,j.jsxs)(c.A.Group,{className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-type"}),(0,j.jsx)("span",{children:"Event Title"})]}),(0,j.jsx)(c.A.Control,{type:"text",value:e,onChange:e=>s(e.target.value),required:!0,disabled:G,placeholder:"Enter event name"})]})})}),(0,j.jsx)(o.A,{children:(0,j.jsx)(n.A,{md:12,children:(0,j.jsxs)(c.A.Group,{className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-text-paragraph"}),(0,j.jsx)("span",{children:"Description"})]}),(0,j.jsx)(c.A.Control,{as:"textarea",rows:3,value:a,onChange:e=>u(e.target.value),disabled:G,placeholder:"Describe your event..."})]})})}),(0,j.jsxs)(o.A,{children:[(0,j.jsx)(n.A,{md:6,children:(0,j.jsxs)(c.A.Group,{className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-clock"}),(0,j.jsx)("span",{children:"Date & Time"})]}),(0,j.jsx)(c.A.Control,{type:"datetime-local",value:A,onChange:e=>N(e.target.value),disabled:G})]})}),(0,j.jsx)(n.A,{md:6,children:(0,j.jsxs)(c.A.Group,{className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-geo-alt"}),(0,j.jsx)("span",{children:"Venue Name"})]}),(0,j.jsx)(c.A.Control,{type:"text",value:v,onChange:e=>f(e.target.value),disabled:G,placeholder:"e.g., Grand Ballroom"})]})})]}),(0,j.jsx)(o.A,{children:(0,j.jsx)(n.A,{md:12,children:(0,j.jsxs)(c.A.Group,{className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-pin-map"}),(0,j.jsx)("span",{children:"Address"})]}),(0,j.jsx)(c.A.Control,{type:"text",value:g,onChange:e=>y(e.target.value),disabled:G,placeholder:"Full address"})]})})}),(0,j.jsx)(o.A,{children:(0,j.jsx)(n.A,{md:12,children:(0,j.jsxs)(c.A.Group,{className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-sticky"}),(0,j.jsx)("span",{children:"Internal Note"})]}),(0,j.jsx)(c.A.Control,{as:"textarea",rows:2,value:C,onChange:e=>k(e.target.value),disabled:G,placeholder:"Private notes for admins and promoters"})]})})}),(0,j.jsx)(o.A,{children:(0,j.jsx)(n.A,{md:12,children:(0,j.jsxs)(c.A.Group,{className:"mb-0",children:[(0,j.jsxs)(c.A.Label,{className:"form-label-icon",children:[(0,j.jsx)("i",{className:"bi bi-image"}),(0,j.jsx)("span",{children:"Cover Image"})]}),(0,j.jsx)(c.A.Control,{type:"file",onChange:e=>{e.target.files[0]&&F(e.target.files[0])},disabled:G,accept:"image/*"}),(0,j.jsx)(c.A.Text,{className:"text-muted",children:"Recommended size: 1200x600px"})]})})})]}),(0,j.jsxs)("div",{className:"card-section",children:[(0,j.jsxs)("div",{className:"section-header",children:[(0,j.jsx)("div",{className:"icon",children:(0,j.jsx)("i",{className:"bi bi-ui-checks"})}),(0,j.jsx)("h3",{children:"Reservation Form Fields"})]}),(0,j.jsx)("div",{className:"info-box mb-4",children:(0,j.jsxs)("p",{children:[(0,j.jsx)("i",{className:"bi bi-info-circle me-2"}),'Customize the information you want to collect from attendees. Mark fields as "Internal" to hide them from public forms.']})}),L.map(e=>(0,j.jsxs)("div",{className:"form-field-card",children:[(0,j.jsxs)(o.A,{className:"align-items-end g-3",children:[(0,j.jsx)(n.A,{md:4,children:(0,j.jsxs)(c.A.Group,{children:[(0,j.jsx)(c.A.Label,{className:"small fw-bold text-muted",children:"Field Label"}),(0,j.jsx)(c.A.Control,{type:"text",name:"label",value:e.label,onChange:s=>R(e.id,s),placeholder:"e.g., Email Address",disabled:G})]})}),(0,j.jsx)(n.A,{md:3,children:(0,j.jsxs)(c.A.Group,{children:[(0,j.jsx)(c.A.Label,{className:"small fw-bold text-muted",children:"Field Type"}),(0,j.jsxs)(c.A.Control,{as:"select",name:"type",value:e.type,disabled:!0,children:[(0,j.jsx)("option",{value:"text",children:"Text"}),(0,j.jsx)("option",{value:"number",children:"Number"}),(0,j.jsx)("option",{value:"date",children:"Date"}),(0,j.jsx)("option",{value:"select",children:"Dropdown"})]})]})}),(0,j.jsx)(n.A,{md:"auto",children:(0,j.jsx)(c.A.Check,{type:"radio",name:"primaryField",label:(0,j.jsxs)("span",{className:"small fw-bold",children:[(0,j.jsx)("i",{className:"bi bi-star-fill text-warning me-1"}),"Primary"]}),checked:E===e.id,onChange:()=>I(e.id)})}),(0,j.jsx)(n.A,{md:"auto",children:(0,j.jsx)(c.A.Check,{type:"checkbox",label:(0,j.jsxs)("span",{className:"small fw-bold",children:[(0,j.jsx)("i",{className:"bi bi-eye-slash me-1"}),"Internal"]}),checked:e.isInternal||!1,onChange:s=>R(e.id,{target:{name:"isInternal",value:s.target.checked}})})}),(0,j.jsx)(n.A,{md:"auto",className:"ms-auto",children:!e.required&&(0,j.jsx)(t.A,{variant:"outline-danger",size:"sm",onClick:()=>{return s=e.id,void P(L.filter(e=>e.id!==s));var s},disabled:G,children:(0,j.jsx)("i",{className:"bi bi-trash"})})})]}),"select"===e.type&&(0,j.jsxs)("div",{className:"options-container",children:[(0,j.jsxs)("h6",{children:[(0,j.jsx)("i",{className:"bi bi-list-ul me-2"}),"Dropdown Options"]}),e.options.map((s,a)=>(0,j.jsxs)(d.A,{className:"mb-2",size:"sm",children:[(0,j.jsx)(c.A.Control,{type:"text",value:s,onChange:s=>((e,s,a)=>{const i=L.map(i=>{if(i.id===e){const e=i.options.map((e,l)=>l===s?a.target.value:e);return(0,l.A)((0,l.A)({},i),{},{options:e})}return i});P(i)})(e.id,a,s),placeholder:"Option ".concat(a+1),disabled:G}),(0,j.jsx)(t.A,{variant:"outline-danger",onClick:()=>((e,s)=>{const a=L.map(a=>{if(a.id===e){const e=a.options.filter((e,a)=>a!==s);return(0,l.A)((0,l.A)({},a),{},{options:e})}return a});P(a)})(e.id,a),disabled:G,children:(0,j.jsx)("i",{className:"bi bi-x-lg"})})]},a)),(0,j.jsxs)(t.A,{variant:"outline-primary",size:"sm",onClick:()=>(e=>{const s=L.map(s=>s.id===e?(0,l.A)((0,l.A)({},s),{},{options:[...s.options,""]}):s);P(s)})(e.id),disabled:G,children:[(0,j.jsx)("i",{className:"bi bi-plus-lg me-1"}),"Add Option"]})]})]},e.id)),(0,j.jsxs)("div",{className:"d-flex gap-2 flex-wrap mt-3",children:[(0,j.jsxs)(t.A,{variant:"link",className:"btn-add-field",onClick:()=>z("text"),disabled:G,children:[(0,j.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Text Field"]}),(0,j.jsxs)(t.A,{variant:"link",className:"btn-add-field",onClick:()=>z("number"),disabled:G,children:[(0,j.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Number Field"]}),(0,j.jsxs)(t.A,{variant:"link",className:"btn-add-field",onClick:()=>z("date"),disabled:G,children:[(0,j.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Date Field"]}),(0,j.jsxs)(t.A,{variant:"link",className:"btn-add-field",onClick:()=>z("select"),disabled:G,children:[(0,j.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Dropdown Field"]})]})]}),(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(t.A,{variant:"primary",type:"submit",className:"btn-submit-large px-5",disabled:G,children:G?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Creating Event..."]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("i",{className:"bi bi-check-circle me-2"}),"Create Event"]})})})]})]})}},1666:(e,s,a)=>{a.d(s,{A:()=>A});var l=a(45),i=a(2555),t=a(8139),n=a.n(t),r=a(5043),c=a(7852),d=a(1068);const o=r.createContext(null);o.displayName="InputGroupContext";const m=o;var x=a(579);const h=["className","bsPrefix","as"],b=r.forwardRef((e,s)=>{let{className:a,bsPrefix:t,as:r="span"}=e,d=(0,l.A)(e,h);return t=(0,c.oU)(t,"input-group-text"),(0,x.jsx)(r,(0,i.A)({ref:s,className:n()(a,t)},d))});b.displayName="InputGroupText";const p=b,j=["bsPrefix","size","hasValidation","className","as"],u=r.forwardRef((e,s)=>{let{bsPrefix:a,size:t,hasValidation:d,className:o,as:h="div"}=e,b=(0,l.A)(e,j);a=(0,c.oU)(a,"input-group");const p=(0,r.useMemo)(()=>({}),[]);return(0,x.jsx)(m.Provider,{value:p,children:(0,x.jsx)(h,(0,i.A)((0,i.A)({ref:s},b),{},{className:n()(o,a,t&&"".concat(a,"-").concat(t),d&&"has-validation")}))})});u.displayName="InputGroup";const A=Object.assign(u,{Text:p,Radio:e=>(0,x.jsx)(p,{children:(0,x.jsx)(d.A,(0,i.A)({type:"radio"},e))}),Checkbox:e=>(0,x.jsx)(p,{children:(0,x.jsx)(d.A,(0,i.A)({type:"checkbox"},e))})})}}]);
//# sourceMappingURL=489.155bc6c5.chunk.js.map